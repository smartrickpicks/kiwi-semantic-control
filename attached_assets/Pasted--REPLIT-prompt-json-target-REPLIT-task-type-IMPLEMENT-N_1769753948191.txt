"REPLIT_prompt_json": {
      "target": "REPLIT",
      "task_type": "IMPLEMENT_NEXT_PHASE_STAGED",
      "stage_1_D1_masterline_autoload": {
        "goal": "Dev mode auto-load master artifacts from repo into their bound panels with 'missing' chips if absent.",
        "requirements": [
          "Add a Dev toggle: 'Use Masterline (Dev)' in Admin > Session/Setup",
          "When enabled: attempt to load default repo paths into the Artifact Registry",
          "Never hard-crash if missing; show Missing chips + allow rebind via Configure",
          "Bindings must be deterministic and visible (a table: Artifact -> Status -> Path -> Rebind button)"
        ],
        "implementation_notes": [
          "Do NOT assume paths blindlyâ€”implement as 'try these defaults' + fallback to user rebind",
          "Persist bindings in localStorage under a single key: orchestrateos.artifacts.v1"
        ],
        "acceptance_criteria": [
          "Fresh run + Dev toggle ON results in pre-bound artifacts if files exist",
          "UI shows clear chips: Loaded / Missing / Rebound",
          "Triage queues populate if Preview Packet exists"
        ]
      },
      "stage_1_D4_tooltips_plain_english": {
        "goal": "Apply nomenclature pack across UI surfaces so no one sees 'sf_packet' or other confusing internals.",
        "requirements": [
          "Global label map: internal_token -> human_label",
          "Tooltip map: label -> tooltip text",
          "Info icons next to: Preview Packet, Truth Config, Proposed Changes, Identity Keys, Evidence chips",
          "Anywhere raw JSON shows internal keys, add a small header: 'Internal JSON (advanced)'"
        ],
        "acceptance_criteria": [
          "Sidebar, drawers, modals show human labels",
          "Tooltips exist on the key nouns",
          "Search for 'sf_packet' in UI text returns none (except inside raw JSON payload display)"
        ]
      },
      "stage_2_D2_admin_workflow_map": {
        "goal": "Admin panel shows the pipeline as a visual, clickable workflow map with artifacts at each step.",
        "requirements": [
          "A vertical flow: Load -> Pre-pack -> Standardize -> Preview -> Triage -> Patch Draft -> Evidence -> PR Ready",
          "Each node shows: required artifacts + their status chips (Loaded/Missing)",
          "Clicking node jumps to the relevant panel/drawer"
        ],
        "acceptance_criteria": [
          "Admin can understand the entire workflow in 30 seconds without reading docs"
        ]
      },
      "stage_3_D3_standardizer_json_canon": {
        "goal": "Implement CSV/XLSX -> merged_dataset.json standardization canon as an in-app step (no external services).",
        "requirements": [
          "Input adapters: CSV (delimiter inference) and XLSX (first sheet default)",
          "Header normalization + alias mapping (driven by Truth Config glossary/anchors if present)",
          "Output shape: merged_dataset_schema (sheets -> headers + rows)",
          "Error model: missing_headers (warning), ambiguous_columns (warning), missing_required_anchor (blocking)"
        ],
        "testing_mode": [
          "If user has no real CSV/XLSX, ship a 'Generate Sample Input' button that produces a deterministic synthetic file in-memory for testing the pipeline"
        ],
        "acceptance_criteria": [
          "Standardizer produces deterministic JSON for the same input",
          "Issues are surfaced into queues (Blocked/Flagged) when anchors are missing",
          "Merged Dataset is viewable in Admin (read-only)"
        ]
      },
      "do_not_do": [
        "Do not add any network calls",
        "Do not write files to disk from UI",
        "Do not change semantics in Truth Config in-app"
      ]
    }
  }
}