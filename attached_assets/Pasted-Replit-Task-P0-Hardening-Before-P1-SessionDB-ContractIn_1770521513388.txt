Replit Task: P0 Hardening Before P1 (SessionDB ContractIndex + Unknown Alert Attachment)

Context:
- Source of truth is runtime branch.
- Repo-relative paths only.
- Keep current P0 behavior, but fix persistence and attachment semantics.
- Do NOT start P1 in this task.

Required fixes:

1) ContractIndex persistence must use SessionDB (IndexedDB), not localStorage
- Keep localStorage for lightweight pointer keys only (active session id, UI prefs).
- Store ContractIndex alongside workbook/session payload in SessionDB.
- On restore:
  - load ContractIndex from SessionDB if present
  - if missing, rebuild once and persist back
- Remove any ContractIndex row/ref payload writes from localStorage.

2) Unknown column alert attachment semantics
- Unknown columns are batch-scoped by default.
- If affected rows have derivable `contract_id`, attach alert to contract rollup.
- If no `contract_id` exists yet (header-only context), attach at batch level.
- Deduplicate alerts by `(batch_id, scope_type, scope_id, sheet, normalized_name)`.

3) Keep fail-open behavior
- If ContractIndex build fails, preserve row-only flow.
- Show visible warning banner.
- Do not break SRR row click behavior.

4) AuditTimeline event correctness
- Ensure these events are emitted with useful payloads:
  - `CONTRACT_INDEX_BUILT` (counts)
  - `CONTRACT_ROLLUP_UPDATED` (aggregate counts + sample contract ids)
  - `UNKNOWN_COLUMN_DETECTED` (scope + normalized_name + sheet)
  - `BATCH_CREATED`
- Keep event volume reasonable (aggregate where possible).

5) Naming/entrypoint clarity
- If any upload entrypoint is legacy-named as CSV but handles XLSX too, keep behavior but add clarifying naming/comments (low-risk only).
- Confirm ContractIndex hooks into actual parse/population path(s).

Acceptance checklist (must all pass):
- Reload restores same file + ContractIndex from SessionDB with no ContractIndex localStorage contamination.
- Unknown-column alerts attach to contract when `contract_id` exists, otherwise batch.
- Grid row click still opens Record Inspection.
- Contract grouping/filter + View Contract still works.
- Fail-open warning appears if index build is forced to fail; app remains usable.
- No console errors in normal load/restore path.

Output format (required):
1) Alignment of Task: <one line>
2) P0 checklist with PASS/FAIL per item
3) Exact files/functions touched (repo-relative, with approx line ranges)
4) Brief before/after for persistence path
5) Manual repro steps and observed results
