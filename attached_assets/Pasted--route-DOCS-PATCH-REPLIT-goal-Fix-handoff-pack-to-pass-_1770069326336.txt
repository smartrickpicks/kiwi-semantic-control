{
  "route": "DOCS_PATCH_REPLIT",
  "goal": "Fix handoff pack to pass Kiwi audit: add header contract blocks, remove invented state, add prompt compliance sections. Minimal docs-only changes.",
  "constraints": [
    "Docs-only. Do not change runtime code.",
    "Do not invent project state. If evidence is missing, use literal string: 'Unknown — requires audit'.",
    "Use canonical terminology only (Data Source, Single Row Review, Submit Patch Request, Review States).",
    "Do not claim pushes/PRs/merges unless verifiable URLs are included (none provided here).",
    "Modify only docs/handoff/{STATUS.md,TASKS.md,HANDOFF.md,AUDIT.md} unless required to resolve broken links."
  ],
  "tasks": [
    {
      "id": "HO-01",
      "action": "UPDATE_FILE",
      "path": "docs/handoff/STATUS.md",
      "instructions": [
        "Insert a header contract block at the very top with explicit fields: Audience, Purpose, Scope, Non-Goals, Authority Level, Owner Agent, Update Rules.",
        "Add: Repository line (repo name + branch) and Open PRs line (use 'unknown/none' if not verifiable).",
        "Replace any progress claims that do not cite a commit/PR URL with: 'Unknown — requires audit'.",
        "Add sections: Summary, Evidence Links, Notes exactly as in Kiwi minimal diff."
      ],
      "target_content_template": [
        "# STATUS (Handoff)",
        "",
        "Audience: Governance reviewers and operators",
        "Purpose: Snapshot of current governance/doc state for Orchestrate OS",
        "Scope: Docs-only; no implementation or runtime claims",
        "Non-Goals: Do not assert code, runtime, or PR merges",
        "Authority Level: Informational; not a source of truth over canonical docs",
        "Owner Agent: Kiwi (documentation architect)",
        "Update Rules: Update only with links to source evidence (commit/PR/doc). If evidence is unavailable, state “Unknown — requires audit.”",
        "",
        "Repository: smartrickpicks/kiwi-semantic-control (branch: main)",
        "Open PRs: unknown/none",
        "",
        "Summary",
        "- Current UI/UX WIP: Unknown — requires audit",
        "- Known risks/regressions to avoid: Unknown — requires audit",
        "",
        "Evidence Links",
        "- Canonical index: docs/INDEX.md",
        "- UI principles: docs/ui/ui_principles.md",
        "- Data Source panel: docs/ui/views/data_source_view.md",
        "- Single Row Review: docs/ui/views/single_row_review_view.md",
        "",
        "Notes",
        "- Replace any generic progress statements with direct links to commits or PRs",
        "- If no evidence link exists, keep “Unknown — requires audit”"
      ]
    },
    {
      "id": "HO-02",
      "action": "UPDATE_FILE",
      "path": "docs/handoff/TASKS.md",
      "instructions": [
        "Insert the same header contract pattern at the top (Audience/Purpose/Scope/Non-Goals/Authority Level/Owner Agent/Update Rules).",
        "Add Repository + Open PRs lines.",
        "Ensure tasks do not claim status without evidence. Use 'Unknown — requires audit' where needed.",
        "Keep tags system explicit: [TODO], [IN_PROGRESS], [BLOCKED], [DONE] even if some are empty."
      ],
      "target_content_template": [
        "# TASKS (Handoff)",
        "",
        "Audience: Governance reviewers and operators",
        "Purpose: Enumerate governance-aligned tasks with evidence references",
        "Scope: Docs-only; no runtime or implementation tasks",
        "Non-Goals: Do not claim code merges or runtime changes",
        "Authority Level: Informational; tasks must reference evidence links",
        "Owner Agent: Kiwi (documentation architect)",
        "Update Rules: Every task must include a source link; otherwise mark “Unknown — requires audit”",
        "",
        "Repository: smartrickpicks/kiwi-semantic-control (branch: main)",
        "Open PRs: unknown/none",
        "",
        "Task Backlog (examples, replace with real entries)",
        "- [TODO] [Unknown — requires audit] Lock gate_parse owning view to data_source_panel in docs/ui/gate_view_mapping.md",
        "- [TODO] [Unknown — requires audit] Align Human-Agent-Workflow-V1.json node labels with canonical terms",
        "",
        "[IN_PROGRESS]",
        "- (none)",
        "",
        "[BLOCKED]",
        "- (none)",
        "",
        "[DONE]",
        "- (none)",
        "",
        "Definition of Done",
        "- Linked evidence (commit/PR/docline)",
        "- Terminology compliance check passed (no forbidden terms)",
        "- No invented state; ambiguous items marked “Unknown — requires audit”"
      ]
    },
    {
      "id": "HO-03",
      "action": "UPDATE_FILE",
      "path": "docs/handoff/HANDOFF.md",
      "instructions": [
        "Ensure the header contract includes Authority Level and Owner Agent explicitly, plus Update Rules.",
        "Add explicit sections required by prompt compliance: repo+branch, open PRs, current UI/UX WIP, known risks/regressions.",
        "If no verifiable evidence exists for WIP or risks, use 'Unknown — requires audit'.",
        "Ensure Packet Contents references STATUS.md, TASKS.md, and AUDIT.md."
      ],
      "target_content_template": [
        "# HANDOFF (Governance Packet)",
        "",
        "Audience: Reviewers and operators",
        "Purpose: Provide a consistent packet for review and continuation",
        "Scope: Docs and governance contracts only",
        "Non-Goals: No code changes, no runtime actions, no PR merges",
        "Authority Level: Informational, defers to canonical docs",
        "Owner Agent: Kiwi (documentation architect)",
        "Update Rules: Reference commits/PRs; otherwise use “Unknown — requires audit”",
        "",
        "Repository: smartrickpicks/kiwi-semantic-control (branch: main)",
        "Open PRs: unknown/none",
        "",
        "Current UI/UX Work In Progress",
        "- Unknown — requires audit",
        "",
        "Packet Contents",
        "- STATUS.md — current snapshot",
        "- TASKS.md — task backlog with evidence links",
        "- AUDIT.md — latest audit notes and diffs",
        "",
        "Known Risks/Regressions (docs-only)",
        "- Unknown — requires audit"
      ]
    },
    {
      "id": "HO-04",
      "action": "UPDATE_FILE",
      "path": "docs/handoff/AUDIT.md",
      "instructions": [
        "Insert a full header contract block at top (Audience/Purpose/Scope/Non-Goals/Authority Level/Owner Agent/Update Rules).",
        "Keep it docs-only and avoid any claims without links.",
        "Add the checklist and references sections as in Kiwi diff."
      ],
      "target_content_template": [
        "# AUDIT (Docs-Only)",
        "",
        "Audience: Governance reviewers",
        "Purpose: Record audit checks, findings, and minimal diffs",
        "Scope: Only allowed paths; docs-only assertions",
        "Non-Goals: No claims about code execution, pipelines, or merges",
        "Authority Level: Informational",
        "Owner Agent: Kiwi (documentation architect)",
        "Update Rules: Include commit/PR links for any claimed change; otherwise use “Unknown — requires audit”",
        "",
        "Checklist",
        "- Canonical terminology: PASS/FAIL (link evidence)",
        "- No invented state: PASS/FAIL (link evidence)",
        "- Prompt compliance: PASS/FAIL (repo+branch, open PRs, UI WIP, risks)",
        "",
        "References",
        "- docs/INDEX.md",
        "- docs/ui/ui_principles.md",
        "- docs/overview.md"
      ]
    }
  ],
  "acceptance_tests": [
    "All four files exist at docs/handoff/{STATUS.md,TASKS.md,HANDOFF.md,AUDIT.md}.",
    "Each file begins with a header contract block including: Audience, Purpose, Scope, Non-Goals, Authority Level, Owner Agent, Update Rules.",
    "No progress or blocker statements remain unless they include verifiable evidence links; otherwise they read exactly: 'Unknown — requires audit'.",
    "HANDOFF.md includes repo+branch, open PRs, current UI/UX WIP, and known risks/regressions sections.",
    "No forbidden legacy terms appear."
  ],
  "output_request": "After edits, print a concise diff summary and the exact git commands to commit and push (do not claim you pushed)."
}