{
  "goal": "Implement DataDash V1 operator ergonomics in Orchestrate OS by adding an All-Data Grid as the primary operator surface and converting Triage into an alert lens, while preserving strict RBAC, render boundaries, and offline deterministic behavior.",
  "constraints": [
    "Offline-first only; no network calls",
    "Deterministic UI behavior; no runtime execution",
    "Copy-only exports; no file writes from UI",
    "Admin UI must only exist under #/admin/* routes",
    "RBAC enforced at router-level, not component-level",
    "Loader must remain a drawer/modal, not a routable page",
    "No new dependencies"
  ],
  "tasks": [
    {
      "id": "GRID-01",
      "title": "Add All-Data Grid route and page",
      "description": "Create a new operator page at #/grid that renders a dense, spreadsheet-style view of the standardized dataset.",
      "implementation": {
        "route": "#/grid",
        "page_path": "ui/viewer/pages/Grid.*",
        "router_changes": [
          "Register #/grid route",
          "If datasetLoaded === true, default route is #/grid",
          "If datasetLoaded === false, default route is #/triage"
        ],
        "ui_requirements": [
          "Sheet selector dropdown (multi-sheet aware, deterministic ordering)",
          "Dense table with horizontal scroll",
          "Sticky header",
          "Column toggle menu",
          "Search input",
          "Status filter chips: All, Flagged, Needs Review, Blocked, Finalized"
        ],
        "prohibitions": [
          "No admin controls rendered",
          "No standardizer controls rendered",
          "No patch execution controls rendered"
        ]
      }
    },
    {
      "id": "GRID-02",
      "title": "Deterministic grid filtering and deep links",
      "description": "Implement deterministic filtering driven by URL query parameters.",
      "implementation": {
        "query_params": [
          "f=all|flagged|needs_review|blocked|finalized",
          "sheet=<sheet_name>",
          "q=<search_string>"
        ],
        "filter_order": [
          "sheet",
          "status",
          "search"
        ],
        "sorting_rules": [
          "severity: blocking > warning > info",
          "identity triplet (contract_key, file_url, file_name)",
          "fallback to stable row index"
        ],
        "examples": [
          "#/grid?f=flagged",
          "#/grid?sheet=Contracts&f=needs_review&q=sony"
        ]
      }
    },
    {
      "id": "TRIAGE-01",
      "title": "Convert Triage into alert lens",
      "description": "Make Triage a summary surface that routes operators into filtered grid views.",
      "implementation": {
        "page_path": "ui/viewer/pages/Triage.*",
        "changes": [
          "Retain summary counts and alert indicators",
          "Remove duplicate full-table renders",
          "Wire chips and alert rows to navigate to #/grid with appropriate query params"
        ],
        "navigation_rules": [
          "Clicking a status chip navigates to #/grid?f=<status>",
          "If triage is sheet-scoped, include sheet param in navigation"
        ]
      }
    },
    {
      "id": "ROW-01",
      "title": "Normalize Row Review entry points",
      "description": "Ensure consistent single-row review behavior from Grid and Triage.",
      "implementation": {
        "routes": [
          "#/row/:id"
        ],
        "entry_points": [
          "Grid row click",
          "Triage item click"
        ],
        "ui_behavior": [
          "Drawer or split-pane (consistent with existing pattern)",
          "Evidence panel present (PDF viewer may remain stubbed)"
        ]
      }
    },
    {
      "id": "RBAC-01",
      "title": "Reassert RBAC and render boundaries",
      "description": "Ensure no admin UI bleed into operator routes.",
      "implementation": {
        "router_rules": [
          "Guard #/admin/* with requireRole('admin') before mount",
          "Non-admin navigation to #/admin/* results in redirect or access denied"
        ],
        "render_rules": [
          "Admin components never conditionally mounted in operator pages",
          "Exclusive route rendering with teardown on navigation"
        ]
      }
    }
  ],
  "acceptance_tests": [
    {
      "name": "Operator default route",
      "steps": [
        "Load app with dataset present"
      ],
      "expected": [
        "Route is #/grid",
        "Dense table renders",
        "No admin UI present"
      ]
    },
    {
      "name": "Triage alert lens behavior",
      "steps": [
        "Navigate to #/triage",
        "Click Flagged chip"
      ],
      "expected": [
        "Navigates to #/grid?f=flagged",
        "Grid filters correctly"
      ]
    },
    {
      "name": "Loader remains modal",
      "steps": [
        "From #/triage, click Load Data"
      ],
      "expected": [
        "Loader opens as drawer/modal",
        "URL remains #/triage"
      ]
    },
    {
      "name": "Admin isolation",
      "steps": [
        "Login as Reviewer",
        "Navigate to #/admin"
      ],
      "expected": [
        "Access denied or redirect",
        "No admin UI flashes or mounts"
      ]
    }
  ],
  "deliverables": [
    "Code changes only",
    "CHANGELOG.md updated with next version entry",
    "No new dependencies introduced"
  ]
}